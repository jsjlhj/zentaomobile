<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
  <title>禅道</title>
  <link href="css/mui.min.css" rel="stylesheet"/>
  <link href="css/style.css" rel="stylesheet"/>
  <link href="css/subpage.css" rel="stylesheet"/>
  <style>
  body {height: 100%; background: #EFEFF4;}
  .mui-content {position: absolute; top: 0; right: 0; left: 0; bottom: 0;}
  .mui-content > .mui-slider {min-height: 100%;}
  .mui-table-view-cell .mui-icon {opacity: 0.5}
  .mui-table-view-cell.mui-active .mui-icon {opacity: 0.95}
  .mui-table-view.list-tasks-done .mui-table-view-cell {color: #999}
  .dialog.task-done .dialog-footer .mui-col-extra {display: none}
  .dialog.task-done .dialog-footer .mui-col {width: 100%}
  </style>
</head>
<body>
<div class="mui-content">
  <div id="slider" class="mui-slider">
      <div id="sliderHeader" class="mui-slider-header">
        <div id="sliderSegmentedControl" class="mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
          <a class="mui-control-item mui-active" href="#assignedTo">指派给我 <span class="mui-badge mui-badge-danger mui-hidden tab-badge-assignedTo"></span></a>
          <a class="mui-control-item" href="#openedBy">由我创建 <span class="mui-badge mui-badge-danger mui-hidden tab-badge-openedBy"></span></a>
          <a class="mui-control-item" href="#finishedBy">由我完成 <span class="mui-badge mui-badge-danger mui-hidden tab-badge-finishedBy"></span></a>
        </div>
        <div id="sliderProgressBar" class="mui-slider-progress-bar mui-col-xs-4"></div>
      </div>
      <div class="mui-slider-group" id="taskList">
        <div id="assignedTo" class="mui-slider-item mui-control-content mui-active">
          <ul class="mui-table-view list-tasks">
          </ul>
          <ul class="mui-table-view list-tasks">
            <li class="mui-table-view-divider"><span class="mui-badge">企业网站第一期 (<strong>71</strong>)</span></li>
            <li class="mui-table-view-cell pri pri-3 item-id-83" data-id="83" data-tab="openedBy">
              <span class="list-title"><span class="list-item-id">83</span>范德萨放fdsafdsafdsafdsafdsfads大撒放大萨嘎而我却</span>
              <span class="mui-badge mui-badge-primary">未开始</span>
            </li>
            <li class="mui-table-view-cell pri pri-3 item-id-82" data-id="82" data-tab="openedBy"><span class="list-title"><span class="list-item-id">82</span>5765876769</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-81" data-id="81" data-tab="openedBy"><span class="list-title"><span class="list-item-id">81</span>89798</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-80" data-id="80" data-tab="openedBy"><span class="list-title"><span class="list-item-id">80</span>79879</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-79" data-id="79" data-tab="openedBy"><span class="list-title"><span class="list-item-id">79</span>565677</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-78" data-id="78" data-tab="openedBy"><span class="list-title"><span class="list-item-id">78</span>54354354</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-77" data-id="77" data-tab="openedBy"><span class="list-title"><span class="list-item-id">77</span>343</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-76" data-id="76" data-tab="openedBy"><span class="list-title"><span class="list-item-id">76</span>43242343</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-75" data-id="75" data-tab="openedBy"><span class="list-title"><span class="list-item-id">75</span>2432</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-74" data-id="74" data-tab="openedBy"><span class="list-title"><span class="list-item-id">74</span>42343</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-73" data-id="73" data-tab="openedBy"><span class="list-title"><span class="list-item-id">73</span>43543534</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-72" data-id="72" data-tab="openedBy"><span class="list-title"><span class="list-item-id">72</span>5435435</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-71" data-id="71" data-tab="openedBy"><span class="list-title"><span class="list-item-id">71</span>热舞亲热外墙243 </span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-70" data-id="70" data-tab="openedBy"><span class="list-title"><span class="list-item-id">70</span>认为亲热忘情热吻去惹我</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-69" data-id="69" data-tab="openedBy"><span class="list-title"><span class="list-item-id">69</span>惹我惹我亲热万</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-68" data-id="68" data-tab="openedBy"><span class="list-title"><span class="list-item-id">68</span>435</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-67" data-id="67" data-tab="openedBy"><span class="list-title"><span class="list-item-id">67</span>43543543</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-66" data-id="66" data-tab="openedBy"><span class="list-title"><span class="list-item-id">66</span>43543543</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-65" data-id="65" data-tab="openedBy"><span class="list-title"><span class="list-item-id">65</span>435435</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-64" data-id="64" data-tab="openedBy"><span class="list-title"><span class="list-item-id">64</span>545</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-63" data-id="63" data-tab="openedBy"><span class="list-title"><span class="list-item-id">63</span>32432432</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-62" data-id="62" data-tab="openedBy"><span class="list-title"><span class="list-item-id">62</span>24</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-61" data-id="61" data-tab="openedBy"><span class="list-title"><span class="list-item-id">61</span>43243</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-60" data-id="60" data-tab="openedBy"><span class="list-title"><span class="list-item-id">60</span>3424</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-59" data-id="59" data-tab="openedBy"><span class="list-title"><span class="list-item-id">59</span>发放的撒</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-0 item-id-58" data-id="58" data-tab="openedBy"><span class="list-title"><span class="list-item-id">58</span>fdsafdsafdsafds</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-57" data-id="57" data-tab="openedBy"><span class="list-title"><span class="list-item-id">57</span>范德萨放大</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-56" data-id="56" data-tab="openedBy"><span class="list-title"><span class="list-item-id">56</span>范德萨放大撒范德萨放大</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-55" data-id="55" data-tab="openedBy"><span class="list-title"><span class="list-item-id">55</span>测试未读条目提示</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-54" data-id="54" data-tab="openedBy"><span class="list-title"><span class="list-item-id">54</span>情况好起来了</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-53" data-id="53" data-tab="openedBy"><span class="list-title"><span class="list-item-id">53</span>又一个任务测试4</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-52" data-id="52" data-tab="openedBy"><span class="list-title"><span class="list-item-id">52</span>又一个任务测试2</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-51" data-id="51" data-tab="openedBy"><span class="list-title"><span class="list-item-id">51</span>又一个任务测试</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-50" data-id="50" data-tab="openedBy"><span class="list-title"><span class="list-item-id">50</span>这个任务不是指派给我的</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-49" data-id="49" data-tab="openedBy"><span class="list-title"><span class="list-item-id">49</span>批量添加任务测试</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-2 item-id-48" data-id="48" data-tab="openedBy"><span class="list-title"><span class="list-item-id">48</span>分大范德萨放大撒</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-1 item-id-47" data-id="47" data-tab="openedBy"><span class="list-title"><span class="list-item-id">47</span>新增的任务</span><span class="mui-badge mui-badge-danger">进行中</span></li><li class="mui-table-view-cell pri pri-0 item-id-46" data-id="46" data-tab="openedBy"><span class="list-title"><span class="list-item-id">46</span>刚刚完成的任务</span><span class="mui-badge mui-badge-success">已完成</span></li><li class="mui-table-view-cell pri pri-0 item-id-45" data-id="45" data-tab="openedBy"><span class="list-title"><span class="list-item-id">45</span>新闻中心的设计和开发。</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-0 item-id-44" data-id="44" data-tab="openedBy"><span class="list-title"><span class="list-item-id">44</span>fdsfdsafd</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-0 item-id-41" data-id="41" data-tab="openedBy"><span class="list-title"><span class="list-item-id">41</span>fdsfdsafdsf</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-39" data-id="39" data-tab="openedBy"><span class="list-title"><span class="list-item-id">39</span>435435434</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-38" data-id="38" data-tab="openedBy"><span class="list-title"><span class="list-item-id">38</span>54</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-37" data-id="37" data-tab="openedBy"><span class="list-title"><span class="list-item-id">37</span>43</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-36" data-id="36" data-tab="openedBy"><span class="list-title"><span class="list-item-id">36</span>435</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-35" data-id="35" data-tab="openedBy"><span class="list-title"><span class="list-item-id">35</span>543</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-34" data-id="34" data-tab="openedBy"><span class="list-title"><span class="list-item-id">34</span>435</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-33" data-id="33" data-tab="openedBy"><span class="list-title"><span class="list-item-id">33</span>54</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-32" data-id="32" data-tab="openedBy"><span class="list-title"><span class="list-item-id">32</span>35</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-31" data-id="31" data-tab="openedBy"><span class="list-title"><span class="list-item-id">31</span>543</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-30" data-id="30" data-tab="openedBy"><span class="list-title"><span class="list-item-id">30</span>543</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-29" data-id="29" data-tab="openedBy"><span class="list-title"><span class="list-item-id">29</span>543543543</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-28" data-id="28" data-tab="openedBy"><span class="list-title"><span class="list-item-id">28</span>435435443</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-27" data-id="27" data-tab="openedBy"><span class="list-title"><span class="list-item-id">27</span>543</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-26" data-id="26" data-tab="openedBy"><span class="list-title"><span class="list-item-id">26</span>5435</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-25" data-id="25" data-tab="openedBy"><span class="list-title"><span class="list-item-id">25</span>43543</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-24" data-id="24" data-tab="openedBy"><span class="list-title"><span class="list-item-id">24</span>5</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-23" data-id="23" data-tab="openedBy"><span class="list-title"><span class="list-item-id">23</span>43</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-22" data-id="22" data-tab="openedBy"><span class="list-title"><span class="list-item-id">22</span>54355</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-21" data-id="21" data-tab="openedBy"><span class="list-title"><span class="list-item-id">21</span>43543</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-20" data-id="20" data-tab="openedBy"><span class="list-title"><span class="list-item-id">20</span>5</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-19" data-id="19" data-tab="openedBy"><span class="list-title"><span class="list-item-id">19</span>3543543</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-18" data-id="18" data-tab="openedBy"><span class="list-title"><span class="list-item-id">18</span>4354354</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-17" data-id="17" data-tab="openedBy"><span class="list-title"><span class="list-item-id">17</span>543</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-16" data-id="16" data-tab="openedBy"><span class="list-title"><span class="list-item-id">16</span>5435</span><span class="mui-badge mui-badge-success">已完成</span></li><li class="mui-table-view-cell pri pri-3 item-id-15" data-id="15" data-tab="openedBy"><span class="list-title"><span class="list-item-id">15</span>43543</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-14" data-id="14" data-tab="openedBy"><span class="list-title"><span class="list-item-id">14</span>35</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-13" data-id="13" data-tab="openedBy"><span class="list-title"><span class="list-item-id">13</span>4354543</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-12" data-id="12" data-tab="openedBy"><span class="list-title"><span class="list-item-id">12</span>5435</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-11" data-id="11" data-tab="openedBy"><span class="list-title"><span class="list-item-id">11</span>354543</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-3 item-id-10" data-id="10" data-tab="openedBy"><span class="list-title"><span class="list-item-id">10</span>54</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-divider"><span class="mui-badge">企业网站第二期 (<strong>3</strong>)</span></li><li class="mui-table-view-cell pri pri-1 item-id-43" data-id="43" data-tab="openedBy"><span class="list-title"><span class="list-item-id">43</span>哈哈哈哈</span><span class="mui-badge mui-badge-">已关闭</span></li><li class="mui-table-view-cell pri pri-0 item-id-42" data-id="42" data-tab="openedBy"><span class="list-title"><span class="list-item-id">42</span>fdsafdsafd</span><span class="mui-badge mui-badge-primary">未开始</span></li><li class="mui-table-view-cell pri pri-0 item-id-40" data-id="40" data-tab="openedBy"><span class="list-title"><span class="list-item-id">40</span>fdsfdsfd</span><span class="mui-badge mui-badge-primary">未开始</span></li></ul>
        </div>
        <div id="openedBy" class="mui-slider-item mui-control-content">
          <ul class="mui-table-view list-tasks">
          </ul>
        </div>
        <div id="finishedBy" class="mui-slider-item mui-control-content">
          <ul class="mui-table-view list-tasks">
          </ul>
        </div>
        <div id="closedBy" class="mui-slider-item mui-control-content">
          <ul class="mui-table-view list-tasks">
          </ul>
        </div>
      </div>
  </div>
</div>

<script src="js/core.js"></script>
<script src="js/$.js"></script>
<script src="js/console.js"></script>
<script src="js/store.js"></script>
<script src="js/md5.min.js"></script>
<script src="js/mui.js"></script>
<script src="js/zentao.js"></script>
<script src="js/webview.js"></script>
<script src="js/listview.js"></script>
<script>
listView({type: 'task', tabs: ['assignedTo', 'openedBy', 'finishedBy']});

function show(tab, data)
{
    data = data || zentao.filterData(type, tab);
    var $tab = $('#' + tab),
        $tasks = $('#' + tab + ' .list-tasks'),
        unreadCount = 0,
        today = Date.parseName('today');

    for(var i = $tasks.childNodes.length - 1; i >= 0; i--)
    {
        var child = $tasks.childNodes[i];
        $tasks.removeChild(child);
    }

    var groupedData = data.groupBy('projectID'),
        item;
    for(var group in groupedData)
    {
        data = groupedData[group];
        item = item = document.createElement('li');
        item.classList.add('mui-table-view-divider');
        item.innerHTML = '<span class="mui-badge">' + data[0]['projectName'] + ' (<strong>' + data.length + '</strong>)</span>';
        $tasks.appendChild(item);

        data.forEach(function(val)
        {
            item = document.createElement('li');
            item.classList.add('mui-table-view-cell');
            item.classList.add('pri');
            item.classList.add('pri-' + val.pri);
            if(val.unread)
            {
                item.classList.add('unread');
                unreadCount++;
            }
            item.setAttribute('data-id', val.id);
            item.setAttribute('data-tab', tab);
            item.classList.add('item-id-' + val.id);
            item.innerHTML = '<span class="list-title"><span class="list-item-id">' + val.id + '</span>' + val.name + '</span>' + '<span class="mui-badge mui-badge-' + val.statusColor + '">' + val.statusName + '</span>';
            $tasks.appendChild(item);
        });
    }

    updateTabBadge(tab, unreadCount);
};
</script>
</body>
</html>
